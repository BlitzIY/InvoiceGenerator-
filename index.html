<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Faturas Profissional</title>
    <style>
        /* ================= ESTILOS GERAIS (TELA) ================= */
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --bg-color: #f4f7f6;
            --paper-color: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            justify-content: center;
            padding: 20px;
            color: #333;
        }

        .container {
            display: flex;
            gap: 20px;
            max-width: 1200px; /* Largura m√°xima da tela */
            width: 100%;
            flex-wrap: wrap; 
            align-items: flex-start; /* Alinha o topo dos elementos */
        }

        /* √Årea de Controle (Formul√°rio) */
        .control-panel {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-width: 300px;
            position: sticky; /* Mant√©m o menu vis√≠vel ao rolar */
            top: 20px; 
        }

        .control-panel h2 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .form-group input, 
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        /* Melhoria: Feedback visual ao digitar */
        .form-group input:focus, 
        .form-group textarea:focus {
            border-color: var(--accent-color);
            outline: none;
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 10px;
            transition: background 0.3s, transform 0.1s;
        }

        button:active {
            transform: scale(0.98); /* Efeito de clique */
        }

        button:hover {
            background-color: #1a252f;
        }

        button.btn-print {
            background-color: var(--accent-color);
            margin-top: 20px;
        }

        button.btn-print:hover {
            background-color: #2980b9;
        }

        /* √Årea da Fatura (Papel A4 Realista) */
        .invoice-wrapper {
            flex: 1.5;
            display: flex;
            justify-content: center; /* Centraliza o papel na √°rea cinza */
        }

        .invoice-preview {
            background: var(--paper-color);
            /* Medidas exatas do A4 */
            width: 210mm; 
            min-height: 297mm;
            padding: 20mm; /* Margem interna padr√£o A4 */
            box-sizing: border-box;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            position: relative;
        }

        /* Estilos Internos da Fatura */
        .invoice-header {
            display: flex;
            justify-content: space-between;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .company-name {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .invoice-meta {
            text-align: right;
        }

        .section-title {
            font-size: 1.2rem;
            color: var(--primary-color);
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
            padding-bottom: 5px;
        }

        .client-details, .service-details {
            margin-bottom: 30px;
        }

        .service-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .service-table th {
            text-align: left;
            background-color: #eee;
            padding: 10px;
            /* Garante que o cinza saia na impress√£o */
            -webkit-print-color-adjust: exact; 
            print-color-adjust: exact;
        }

        .service-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .total-section {
            text-align: right;
            margin-top: 30px;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .footer {
            margin-top: 50px;
            text-align: center;
            color: #777;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        /* ================= ESTILOS DE IMPRESS√ÉO (CSS @media print) ================= */
        @media print {
            body {
                background: none;
                -webkit-print-color-adjust: exact; /* For√ßa impress√£o de cores exatas */
                print-color-adjust: exact;
            }

            .control-panel, .btn-print, .container {
                display: block;
                width: 100%;
                margin: 0;
                padding: 0;
            }
            
            /* Esconde a interface de controle */
            .control-panel {
                display: none !important;
            }

            /* Garante que o container n√£o restrinja o tamanho */
            .container {
                max-width: none;
            }

            .invoice-wrapper {
                display: block;
                margin: 0;
            }

            .invoice-preview {
                width: 100%;
                min-height: auto; /* Deixa a altura autom√°tica na impress√£o */
                margin: 0;
                padding: 0; /* Remove padding extra pois a impressora j√° tem margem */
                box-shadow: none;
                border: none;
            }

            @page {
                size: A4;
                margin: 1.5cm; /* Define margem da impressora */
            }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="control-panel">
        <h2>üõ†Ô∏è Criar Fatura</h2>
        
        <form id="invoiceForm" onsubmit="event.preventDefault(); gerarFatura();">
            <div class="form-group">
                <label>N√∫mero da Fatura:</label>
                <input type="text" id="inputInvoiceNum" value="INV-001">
            </div>
            
            <div class="form-group">
                <label>Data:</label>
                <input type="date" id="inputDate">
            </div>

            <hr>

            <div class="form-group">
                <label>Nome do Cliente:</label>
                <input type="text" id="inputClientName" placeholder="Ex: Jo√£o Silva">
            </div>
            
            <div class="form-group">
                <label>Email do Cliente:</label>
                <input type="email" id="inputClientEmail" placeholder="joao@email.com">
            </div>

            <hr>

            <div class="form-group">
                <label>Nome do Servi√ßo:</label>
                <input type="text" id="inputServiceName" placeholder="Ex: Desenvolvimento Web">
            </div>

            <div class="form-group">
                <label>Descri√ß√£o:</label>
                <textarea id="inputServiceDesc" rows="3" placeholder="Detalhes do servi√ßo..."></textarea>
            </div>

            <div class="form-group">
                <label>Valor (R$):</label>
                <input type="number" id="inputAmount" step="0.01" placeholder="0.00">
            </div>

            <button type="button" onclick="gerarFatura()">üîÑ Atualizar/Gerar Fatura</button>
            <button type="button" class="btn-print" onclick="window.print()">üñ®Ô∏è Imprimir / Salvar PDF</button>
        </form>
    </div>

    <div class="invoice-wrapper">
        <div class="invoice-preview" id="invoice">
            <header class="invoice-header">
                <div class="company-info">
                    <div class="company-name">MINHA EMPRESA LTDA</div>
                    <div>CNPJ: 00.000.000/0001-00</div>
                    <div>contato@minhaempresa.com</div>
                </div>
                <div class="invoice-meta">
                    <h2>FATURA</h2>
                    <div>N¬∫: <strong id="displayInvoiceNum">---</strong></div>
                    <div>Data: <span id="displayDate">--/--/----</span></div>
                </div>
            </header>

            <section class="client-details">
                <div class="section-title">Faturado para:</div>
                <div id="displayClientName"><strong>Nome do Cliente</strong></div>
                <div id="displayClientEmail">email@cliente.com</div>
            </section>

            <section class="service-details">
                <div class="section-title">Servi√ßos</div>
                <table class="service-table">
                    <thead>
                        <tr>
                            <th>Descri√ß√£o</th>
                            <th style="text-align: right; width: 150px;">Valor</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong id="displayServiceName">Nome do Servi√ßo</strong><br>
                                <small id="displayServiceDesc" style="color: #666;">Descri√ß√£o detalhada aqui...</small>
                            </td>
                            <td style="text-align: right;" id="displayAmount">R$ 0,00</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <div class="total-section">
                Total: <span id="displayTotal">R$ 0,00</span>
            </div>

            <footer class="footer">
                <p>Obrigado pela prefer√™ncia!</p>
                <p>D√∫vidas? Entre em contato conosco.</p>
            </footer>
        </div>
    </div>
</div>

<script>
    // Configura a data inicial e inicia os eventos
    window.addEventListener('DOMContentLoaded', () => {
        document.getElementById('inputDate').valueAsDate = new Date();
        
        // Melhoria: Adiciona "ouvintes" em todos os campos para atualiza√ß√£o em tempo real
        const inputs = document.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            input.addEventListener('input', gerarFatura);
        });

        // Gera a primeira vers√£o
        gerarFatura();
    });

    function gerarFatura() {
        // 1. Capturar os valores (DOM)
        const invoiceNum = document.getElementById('inputInvoiceNum').value;
        const dateInput = document.getElementById('inputDate').value;
        const clientName = document.getElementById('inputClientName').value;
        const clientEmail = document.getElementById('inputClientEmail').value;
        const serviceName = document.getElementById('inputServiceName').value;
        const serviceDesc = document.getElementById('inputServiceDesc').value;
        const amount = parseFloat(document.getElementById('inputAmount').value) || 0;

        // 2. L√≥gica de Formata√ß√£o
        let formattedDate = "--/--/----";
        if (dateInput) {
            const dateObj = new Date(dateInput);
            dateObj.setMinutes(dateObj.getMinutes() + dateObj.getTimezoneOffset());
            formattedDate = dateObj.toLocaleDateString('pt-BR');
        }

        const formattedAmount = amount.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        // 3. Atualizar a Interface
        document.getElementById('displayInvoiceNum').innerText = invoiceNum || '---';
        document.getElementById('displayDate').innerText = formattedDate;
        
        // Usamos l√≥gica tern√°ria para manter um texto padr√£o caso esteja vazio
        document.getElementById('displayClientName').innerHTML = clientName ? `<strong>${clientName}</strong>` : 'Nome do Cliente';
        document.getElementById('displayClientEmail').innerText = clientEmail || 'email@cliente.com';
        
        document.getElementById('displayServiceName').innerText = serviceName || 'Nome do Servi√ßo';
        document.getElementById('displayServiceDesc').innerText = serviceDesc || 'Descri√ß√£o detalhada aqui...';
        
        document.getElementById('displayAmount').innerText = formattedAmount;
        document.getElementById('displayTotal').innerText = formattedAmount;
    }
</script>

</body>
</html>

